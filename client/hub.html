<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battleship - Hub</title>
    <link rel="icon" type="image/png" href="images/logo.png">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/style.css?v=2.3">
    <link rel="stylesheet" href="css/hub.css?v=2.3">
</head>
<body>
    <div class="game-container">
        <!-- Lobby Screen - Minimal Hero Layout -->
        <div id="lobbyScreen" class="screen hub">
            <!-- Background + Overlay -->
            <div class="image-background lobby-bg"></div>
            <div class="hub__overlay"></div>
            
            <!-- Hub Container (2 columns) -->
            <div class="hub__container">
                <!-- Main Card wrapping everything -->
                <div class="hub__main-card">
                    <!-- Top Bar: User Info + Logout (inside card) -->
                    <div class="hub__topbar">
                        <div class="hub__user-chip">
                            <span class="hub__status-dot"></span>
                            <span id="hubUsername" class="hub__username">Player</span>
                            <span class="hub__user-sep">‚Ä¢</span>
                            <span id="hubUserId" class="hub__user-id">ID: ----</span>
                        </div>
                        <div class="hub__actions">
                            <div class="hub__online-chip">
                                <span class="hub__online-dot"></span>
                                <span id="hubOnlineCount" class="hub__online-text">0 online</span>
                            </div>
                            <button id="hubGuideOpenBtn" class="hub__help-btn" type="button" title="Hu?ng d?n">
                                <span class="hub__help-icon">?</span>
                                <span class="hub__help-text">H∆∞·ªõng d·∫´n</span>
                            </button>
                            <button id="hubLogoutBtn" class="hub__logout-btn">
                                <span class="hub__logout-icon">üö™</span>
                                <span class="hub__logout-text">ƒêƒÉng xu·∫•t</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Content Grid (2 columns) -->
                    <div class="hub__content-grid">
                <!-- Left Column: Logo + Title + Character -->
                <div class="hub__left">
                    <!-- Logo -->
                    <div class="hub__logo">
                        <img src="images/logo.png" alt="Battleship Logo" class="hub__logo-img">
                    </div>
                    
                    <!-- Title & Subtitle -->
                    <div class="hub__text">
                        <h1 class="hub__title" style="font-family: 'Black Ops One', system-ui !important;">BATTLE SHIP</h1>
                        <p class="hub__subtitle">Chi·∫øn tr∆∞·ªùng h·∫£i chi·∫øn ‚Ä¢ Tr·∫≠n chi·∫øn k·ªãch t√≠nh</p>
                    </div>
                    
                    <!-- Character Switcher -->
                    <div class="hub__character">
                        <!-- Character Display with shadow -->
                        <div class="hub__character-wrap">
                            <img id="heroCharacterImg" src="images/characters/character1/avatar-large.png" alt="Character" class="hub__character-img">
                            <div class="hub__character-shadow"></div>
                        </div>
                        
                        <!-- Character Name Badge -->
                        <div class="hub__character-badge">
                            <span id="heroCharacterName">Captain Morgan</span>
                        </div>
                        
                        <!-- Character Thumbnails -->
                        <div class="hub__character-thumbs">
                            <button class="hub__thumb hub__thumb--active" data-char-id="0">
                                <img src="images/characters/character1/avatar-thumb.png" alt="Character 1">
                            </button>
                            <button class="hub__thumb" data-char-id="1">
                                <img src="images/characters/character2/avatar-thumb.png" alt="Character 2">
                            </button>
                            <button class="hub__thumb" data-char-id="2">
                                <img src="images/characters/character3/avatar-thumb.png" alt="Character 3">
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Right Column: All Action Buttons & Panels -->
                <div class="hub__right">
                    <!-- Quick Play Button -->
                        <button id="btnQuickPlay" class="hub__btn hub__btn--primary">
                        <span class="hub__btn-icon">‚ö°</span>
                        <span class="hub__btn-content">
                            <span class="hub__btn-text">Ch∆°i Ngay</span>
                            <span class="hub__btn-desc">Gh√©p tr·∫≠n t·ª± ƒë·ªông</span>
                        </span>
                    </button>
                    
                    <!-- Create Private Room Button -->
                    <button id="btnCreatePrivateRoom" class="hub__btn hub__btn--secondary">
                        <span class="hub__btn-icon">üîí</span>
                        <span class="hub__btn-content">
                            <span class="hub__btn-text">T·∫°o Ph√≤ng Ri√™ng</span>
                            <span class="hub__btn-desc">T·∫°o m√£ ph√≤ng ƒë·ªÉ m·ªùi b·∫°n</span>
                        </span>
                    </button>
                    
                    <!-- Join Room Panel -->
                    <div class="hub__join-panel">
                        <h3 class="hub__join-title">Tham Gia Ph√≤ng</h3>
                        <p class="hub__join-subtitle">Nh·∫≠p m√£ ph√≤ng ƒë·ªÉ ch∆°i v·ªõi b·∫°n b√®</p>
                        
                        <!-- Panel Form -->
                        <div class="hub__join-form">
                            <input 
                                type="text" 
                                id="inputRoomCode" 
                                class="hub__join-input" 
                                placeholder="NH·∫¨P M√É (6 K√ù T·ª∞)" 
                                maxlength="6"
                                autocomplete="off"
                            >
                            <button id="btnJoinPrivateRoom" class="hub__join-btn">
                                <span class="hub__join-btn-icon">ü§ù</span>
                                <span class="hub__join-btn-text">Tham Gia</span>
                            </button>
                        </div>
                        
                        <!-- Helper Text -->
                        <p class="hub__join-helper">üí° M√£ ph√≤ng g·ªìm 6 k√Ω t·ª± in hoa</p>
                    </div>
                </div>
                    </div> <!-- End hub__content-grid -->
                </div> <!-- End hub__main-card -->
            </div>
            
            <!-- Queue Waiting Overlay -->
            <div id="searchingOverlay" class="queue-overlay" style="display: none;">
                <div class="queue-content">
                    <div class="queue-spinner"></div>
                    <h3>ƒêang t√¨m ƒë·ªëi th·ªß...</h3>
                    <p>Vui l√≤ng ch·ªù trong gi√¢y l√°t</p>
                    <button id="btnCancelQueue" class="btn-cancel-queue">Hu·ª∑ t√¨m</button>
                </div>
            </div>
                        <!-- Hub Guide Overlay -->
            <div id="hubGuideOverlay" class="hub-guide" aria-hidden="true">
                <div class="hub-guide__card" role="dialog" aria-modal="true" aria-labelledby="hubGuideTitle">
                    
                    <!-- Header with Navy Theme -->
                    <div class="hub-guide__navy-header">
                        <div class="hub-guide__glow"></div>
                        <div class="hub-guide__header-content">
                            <div class="hub-guide__header-left">
                                <div class="hub-guide__logo-badge">
                                    <img src="images/logo.png" alt="Logo" class="hub-guide__logo-img">
                                </div>
                                <h2 id="hubGuideTitle" class="hub-guide__title">H∆∞·ªõng D·∫´n Ch∆°i</h2>
                            </div>
                            <button id="hubGuideCloseBtn" type="button" aria-label="ƒê√≥ng" class="hub-guide__close-btn">√ó</button>
                        </div>
                    </div>

                    <!-- Tabs Navigation with Sliding Indicator -->
                    <div class="hub-guide__tabs">
                        <button class="guide-tab-btn active" data-tab="modes">Ch·∫ø ƒê·ªô</button>
                        <button class="guide-tab-btn" data-tab="placement">ƒê·∫∑t T√†u</button>
                        <button class="guide-tab-btn" data-tab="gameplay">Ch∆°i Game</button>
                        <button class="guide-tab-btn" data-tab="tips">M·∫πo</button>
                        <div class="guide-tab-indicator"></div>
                    </div>

                    <!-- Body Content -->
                    <div class="hub-guide__body">
                        <div class="guide-tab-panels">
                        
                            <!-- Tab 1: Ch·∫ø ƒë·ªô ch∆°i -->
                            <div class="guide-tab-panel active" data-tab="modes">
                                <div style="display: grid; gap: 12px;">
                                    
                                    <div style="background: rgba(14, 165, 233, 0.08); padding: 16px; border-radius: 10px; border-left: 3px solid #0ea5e9; backdrop-filter: blur(10px);">
                                        <div style="display: flex; align-items: start; gap: 12px;">
                                            <div style="background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%); color: white; width: 34px; height: 34px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 16px; flex-shrink: 0; box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);">‚ö°</div>
                                            <div>
                                                <h4 style="margin: 0 0 6px 0; color: #5fa8d3; font-size: 14px; font-weight: 700;">Quick Play (Ch∆°i Ngay)</h4>
                                                <p style="margin: 0; color: rgba(255,255,255,0.7); font-size: 12px; line-height: 1.5;">H·ªá th·ªëng t·ª± ƒë·ªông gh√©p b·∫°n v·ªõi ng∆∞·ªùi ch∆°i kh√°c. V√†o lobby v√† b·∫Øt ƒë·∫ßu ch∆°i ngay.</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div style="background: rgba(234, 179, 8, 0.08); padding: 16px; border-radius: 10px; border-left: 3px solid #eab308; backdrop-filter: blur(10px);">
                                        <div style="display: flex; align-items: start; gap: 12px;">
                                            <div style="background: linear-gradient(135deg, #eab308 0%, #ca8a04 100%); color: white; width: 34px; height: 34px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 16px; flex-shrink: 0; box-shadow: 0 4px 12px rgba(234, 179, 8, 0.3);">üîí</div>
                                            <div>
                                                <h4 style="margin: 0 0 6px 0; color: #fbbf24; font-size: 14px; font-weight: 700;">T·∫°o Ph√≤ng Ri√™ng</h4>
                                                <p style="margin: 0; color: rgba(255,255,255,0.7); font-size: 12px; line-height: 1.5;">T·∫°o m√£ 6 k√Ω t·ª± (VD: ABC123) ƒë·ªÉ m·ªùi b·∫°n b√® v√†o ph√≤ng c·ªßa b·∫°n.</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div style="background: rgba(34, 197, 94, 0.08); padding: 16px; border-radius: 10px; border-left: 3px solid #22c55e; backdrop-filter: blur(10px);">
                                        <div style="display: flex; align-items: start; gap: 12px;">
                                            <div style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); color: white; width: 34px; height: 34px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 16px; flex-shrink: 0; box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);">ü§ù</div>
                                            <div>
                                                <h4 style="margin: 0 0 6px 0; color: #4ade80; font-size: 14px; font-weight: 700;">Tham Gia Ph√≤ng</h4>
                                                <p style="margin: 0; color: rgba(255,255,255,0.7); font-size: 12px; line-height: 1.5;">Nh·∫≠p m√£ 6 k√Ω t·ª± ƒë·ªÉ v√†o ph√≤ng c·ªßa b·∫°n b√®.</p>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <!-- Tab 2: ƒê·∫∑t T√†u -->
                            <div class="guide-tab-panel" data-tab="placement" style="display: none;">
                                <div style="display: grid; gap: 12px;">
                                    
                                    <div style="background: rgba(168, 85, 247, 0.08); padding: 14px; border-radius: 10px; border-left: 3px solid #a855f7;">
                                        <h4 style="margin: 0 0 6px 0; color: #c084fc; font-size: 13px; font-weight: 700;">K√©o & Th·∫£</h4>
                                        <p style="margin: 0; color: rgba(255,255,255,0.65); font-size: 11px; line-height: 1.5;">Click gi·ªØ t√†u ‚Üí K√©o l√™n b·∫£ng 10√ó10 ‚Üí Th·∫£ ƒë·ªÉ ƒë·∫∑t</p>
                                    </div>

                                    <div style="background: rgba(239, 68, 68, 0.08); padding: 14px; border-radius: 10px; border-left: 3px solid #ef4444;">
                                        <h4 style="margin: 0 0 6px 0; color: #f87171; font-size: 13px; font-weight: 700;">Xoay T√†u (Ph√≠m R)</h4>
                                        <p style="margin: 0; color: rgba(255,255,255,0.65); font-size: 11px; line-height: 1.5;">Nh·∫•n <span style="background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px; font-weight: 600;">R</span> khi k√©o ‚Üí T√†u xoay ngang/d·ªçc</p>
                                    </div>

                                    <div style="background: rgba(168, 85, 247, 0.08); padding: 14px; border-radius: 10px; border-left: 3px solid #a855f7;">
                                        <h4 style="margin: 0 0 8px 0; color: #c084fc; font-size: 13px; font-weight: 700;">N√∫t Ti·ªán √çch</h4>
                                        <div style="display: grid; gap: 4px; font-size: 11px; color: rgba(255,255,255,0.7);">
                                            <div>‚Ä¢ <strong>Random:</strong> ƒê·∫∑t ng·∫´u nhi√™n</div>
                                            <div>‚Ä¢ <strong>Reset:</strong> X√≥a h·∫øt</div>
                                            <div>‚Ä¢ <strong>Deploy:</strong> Ho√†n th√†nh</div>
                                        </div>
                                    </div>

                                    <div style="background: rgba(234, 179, 8, 0.08); padding: 14px; border-radius: 10px; border-left: 3px solid #eab308;">
                                        <h4 style="margin: 0 0 6px 0; color: #fbbf24; font-size: 13px; font-weight: 700;">5 Lo·∫°i T√†u</h4>
                                        <div style="font-size: 10px; color: rgba(255,255,255,0.65); line-height: 1.6;">
                                            Carrier (5 √¥) ‚Ä¢ Battleship (4 √¥) ‚Ä¢ Cruiser (3 √¥)<br>
                                            Submarine (3 √¥) ‚Ä¢ Destroyer (2 √¥)
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <!-- Tab 3: Ch∆°i Game -->
                            <div class="guide-tab-panel" data-tab="gameplay" style="display: none;">
                                <div style="display: grid; gap: 10px;">
                                    
                                    <div style="background: rgba(239, 68, 68, 0.08); padding: 12px; border-radius: 8px; display: flex; gap: 10px; border-left: 3px solid #ef4444;">
                                        <div style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; width: 28px; height: 28px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 11px; flex-shrink: 0;">1</div>
                                        <div>
                                            <h4 style="margin: 0 0 3px 0; color: #f87171; font-size: 12px; font-weight: 700;">L∆∞·ª£t c·ªßa B·∫°n</h4>
                                            <p style="margin: 0; color: rgba(255,255,255,0.65); font-size: 10px;">Click √¥ tr√™n b·∫£ng ƒë·ªëi th·ªß ‚Üí HIT ho·∫∑c MISS</p>
                                        </div>
                                    </div>

                                    <div style="background: rgba(234, 179, 8, 0.08); padding: 12px; border-radius: 8px; display: flex; gap: 10px; border-left: 3px solid #eab308;">
                                        <div style="background: linear-gradient(135deg, #eab308 0%, #ca8a04 100%); color: white; width: 28px; height: 28px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 11px; flex-shrink: 0;">2</div>
                                        <div>
                                            <h4 style="margin: 0 0 3px 0; color: #fbbf24; font-size: 12px; font-weight: 700;">Tr√∫ng (HIT)</h4>
                                            <p style="margin: 0; color: rgba(255,255,255,0.65); font-size: 10px;">√î ƒë·ªè ‚Üí B·∫Øn th√™m l∆∞·ª£t ‚Üí Ti·∫øp t·ª•c ƒë·∫øn khi tr∆∞·ª£t</p>
                                        </div>
                                    </div>

                                    <div style="background: rgba(14, 165, 233, 0.08); padding: 12px; border-radius: 8px; display: flex; gap: 10px; border-left: 3px solid #0ea5e9;">
                                        <div style="background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%); color: white; width: 28px; height: 28px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 11px; flex-shrink: 0;">3</div>
                                        <div>
                                            <h4 style="margin: 0 0 3px 0; color: #5fa8d3; font-size: 12px; font-weight: 700;">Tr∆∞·ª£t (MISS)</h4>
                                            <p style="margin: 0; color: rgba(255,255,255,0.65); font-size: 10px;">√î x√°m ‚Üí ƒê·ªïi l∆∞·ª£t cho ƒë·ªëi th·ªß</p>
                                        </div>
                                    </div>

                                    <div style="background: rgba(168, 85, 247, 0.08); padding: 12px; border-radius: 8px; display: flex; gap: 10px; border-left: 3px solid #a855f7;">
                                        <div style="background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%); color: white; width: 28px; height: 28px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 11px; flex-shrink: 0;">4</div>
                                        <div>
                                            <h4 style="margin: 0 0 3px 0; color: #c084fc; font-size: 12px; font-weight: 700;">Ch√¨m T√†u</h4>
                                            <p style="margin: 0; color: rgba(255,255,255,0.65); font-size: 10px;">B·∫Øn tr√∫ng h·∫øt √¥ ‚Üí T√†u ch√¨m ‚Üí G·∫°ch ngang</p>
                                        </div>
                                    </div>

                                    <div style="background: rgba(34, 197, 94, 0.08); padding: 12px; border-radius: 8px; display: flex; gap: 10px; border-left: 3px solid #22c55e;">
                                        <div style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); color: white; width: 28px; height: 28px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 11px; flex-shrink: 0;">5</div>
                                        <div>
                                            <h4 style="margin: 0 0 3px 0; color: #4ade80; font-size: 12px; font-weight: 700;">Chi·∫øn Th·∫Øng</h4>
                                            <p style="margin: 0; color: rgba(255,255,255,0.65); font-size: 10px;">Ch√¨m h·∫øt 5 t√†u ƒë·ªëi th·ªß = B·∫°n th·∫Øng!</p>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <!-- Tab 4: M·∫πo & Chi·∫øn L∆∞·ª£c -->
                            <div class="guide-tab-panel" data-tab="tips" style="display: none;">
                                <div style="display: grid; gap: 12px;">
                                    
                                    <div style="background: rgba(95, 168, 211, 0.08); padding: 14px; border-radius: 10px; border-left: 3px solid #5fa8d3;">
                                        <h4 style="margin: 0 0 8px 0; color: #5fa8d3; font-size: 13px; font-weight: 700;">üéØ ƒê·∫∑t T√†u Th√¥ng Minh</h4>
                                        <ul style="margin: 0; padding-left: 16px; font-size: 11px; color: rgba(255,255,255,0.7); line-height: 1.6;">
                                            <li>ƒê·∫∑t t√†u c√°ch xa nhau</li>
                                            <li>Tr√°nh h√†ng ngang/d·ªçc li√™n t·ª•c</li>
                                            <li>T√†u nh·ªè ·ªü g√≥c b·∫£n ƒë·ªì</li>
                                        </ul>
                                    </div>

                                    <div style="background: rgba(95, 168, 211, 0.08); padding: 14px; border-radius: 10px; border-left: 3px solid #5fa8d3;">
                                        <h4 style="margin: 0 0 8px 0; color: #5fa8d3; font-size: 13px; font-weight: 700;">üí° Chi·∫øn L∆∞·ª£c B·∫Øn</h4>
                                        <ul style="margin: 0; padding-left: 16px; font-size: 11px; color: rgba(255,255,255,0.7); line-height: 1.6;">
                                            <li>B·∫Øn theo h√¨nh vu√¥ng c√°ch nhau</li>
                                            <li>Khi tr√∫ng, b·∫Øn xung quanh</li>
                                            <li>Ch√∫ √Ω tracker t√†u</li>
                                        </ul>
                                    </div>

                                    <div style="background: rgba(95, 168, 211, 0.08); padding: 14px; border-radius: 10px; border-left: 3px solid #5fa8d3;">
                                        <h4 style="margin: 0 0 8px 0; color: #5fa8d3; font-size: 13px; font-weight: 700;">‚è±Ô∏è Qu·∫£n L√Ω Th·ªùi Gian</h4>
                                        <ul style="margin: 0; padding-left: 16px; font-size: 11px; color: rgba(255,255,255,0.7); line-height: 1.6;">
                                            <li>M·ªói l∆∞·ª£t 60 gi√¢y</li>
                                            <li>B·∫Øn nhanh nh∆∞ng t·ªânh t√°o</li>
                                            <li>Theo d√µi tracker li√™n t·ª•c</li>
                                        </ul>
                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="hub-guide__footer">
                        <label class="hub-guide__checkbox">
                            <input type="checkbox" id="hubGuideNeverAgain">
                            <span>Kh√¥ng hi·ªÉn th·ªã l·∫ßn sau</span>
                        </label>
                        <button id="hubGuideStartBtn" type="button" class="hub-guide__start-btn">B·∫Øt ƒê·∫ßu Ch∆°i</button>
                    </div>
                    
                </div>
            </div>
</div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/shared/state.js"></script>
    <script src="js/shared/socket-shared.js"></script>
    
    <!-- Guide Tab Handler Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab switching for guide with indicator
            const tabs = document.querySelectorAll('.guide-tab-btn');
            const indicator = document.querySelector('.guide-tab-indicator');
            const contents = document.querySelectorAll('.guide-tab-panel');
            
            if (!tabs.length) return;
            
            tabs.forEach((tab, index) => {
                tab.addEventListener('click', function() {
                    const tabName = this.dataset.tab;
                    
                    // Update active states
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update indicator position
                    if (indicator) {
                        const position = (index * 100) / tabs.length;
                        indicator.style.left = position + '%';
                    }
                    
                    // Update panels
                    contents.forEach(c => {
                        c.classList.remove('active');
                        c.style.display = 'none';
                    });
                    const activePanel = document.querySelector(`.guide-tab-panel[data-tab="${tabName}"]`);
                    if (activePanel) {
                        activePanel.classList.add('active');
                        activePanel.style.display = 'block';
                    }
                });
            });
        });
    </script>
    
    <script src="js/hub.js"></script>
</body>
</html>
