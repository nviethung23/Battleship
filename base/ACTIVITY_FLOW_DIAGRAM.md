# BATTLESHIP - ACTIVITY FLOW DIAGRAMS
## Sơ đồ hoạt động hệ thống

---

## 1. TỔNG QUAN ACTIVITY FLOW

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        BATTLESHIP GAME - MAIN FLOW                           │
└─────────────────────────────────────────────────────────────────────────────┘

                                    ●
                                    │ Start
                                    ▼
                            ┌───────────────┐
                            │  index.html   │
                            │  (Login Page) │
                            └───────┬───────┘
                                    │
                    ┌───────────────┼───────────────┐
                    ▼               ▼               ▼
              ┌──────────┐   ┌──────────┐   ┌──────────┐
              │  Login   │   │ Register │   │  Guest   │
              └────┬─────┘   └────┬─────┘   └────┬─────┘
                   │              │              │
                   └──────────────┴──────────────┘
                                  │
                                  ▼
                          ┌───────────────┐
                          │   hub.html    │
                          │  (Main Menu)  │
                          └───────┬───────┘
                                  │
                  ┌───────────────┼───────────────┐
                  ▼               ▼               ▼
          ┌────────────┐  ┌────────────┐  ┌────────────┐
          │ Quick Play │  │Create Room │  │ Join Room  │
          └─────┬──────┘  └─────┬──────┘  └─────┬──────┘
                │               │               │
                └───────────────┴───────────────┘
                                │
                                ▼
                        ┌───────────────┐
                        │  lobby.html   │
                        │(Waiting Room) │
                        └───────┬───────┘
                                │
                                ▼
                        ┌───────────────┐
                        │  game.html    │
                        │ (Deployment)  │
                        └───────┬───────┘
                                │
                                ▼
                        ┌───────────────┐
                        │    Battle     │
                        └───────┬───────┘
                                │
                                ▼
                        ┌───────────────┐
                        │  Game Over    │
                        └───────┬───────┘
                                │
                                ▼
                                ◉ End
```

---

## 2. AUTHENTICATION ACTIVITY

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         AUTHENTICATION FLOW                                  │
└─────────────────────────────────────────────────────────────────────────────┘

                                    ●
                                    │
                                    ▼
                            ◇───────────────◇
                           ╱ Select Action   ╲
                          ◇─────────────────◇
                         ╱         │         ╲
                        ▼          ▼          ▼
               ┌─────────────┐┌─────────┐┌─────────────┐
               │   LOGIN     ││REGISTER ││   GUEST     │
               └──────┬──────┘└────┬────┘└──────┬──────┘
                      │            │            │
                      ▼            ▼            ▼
               ┌─────────────┐┌─────────┐┌─────────────┐
               │Enter user/  ││Enter    ││Enter Guest  │
               │password     ││user/pass││  Name       │
               └──────┬──────┘│/email   │└──────┬──────┘
                      │       └────┬────┘       │
                      ▼            ▼            ▼
               ┌─────────────┐┌─────────┐┌─────────────┐
               │POST /login  ││POST     ││POST /guest- │
               │             ││/register││login        │
               └──────┬──────┘└────┬────┘└──────┬──────┘
                      │            │            │
                      ▼            ▼            ▼
                 ◇────────◇  ◇────────◇  ◇────────────◇
                ╱ Valid?  ╲ ╱Validate ╲ ╱Create guest ╲
               ◇──────────◇◇──────────◇◇──────────────◇
               │NO      YES│NO      YES│
               ▼          ▼▼          ▼└──────────────┘
        ┌──────────┐     │ ┌──────────┐              │
        │Show Error│     │ │Show Error│              │
        └────┬─────┘     │ └────┬─────┘              │
             │           │      │                    │
             ▼           │      ▼                    │
        ┌──────────┐     │ ┌──────────┐              │
        │  Retry   │     │ │  Retry   │              │
        └──────────┘     │ └──────────┘              │
                         │                           │
                         └───────────┬───────────────┘
                                     ▼
                              ┌─────────────┐
                              │ Save Token  │
                              │ to Storage  │
                              └──────┬──────┘
                                     │
                                     ▼
                              ┌─────────────┐
                              │ Redirect to │
                              │   hub.html  │
                              └──────┬──────┘
                                     │
                                     ▼
                                     ◉
```

---

## 3. MATCHMAKING ACTIVITY

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         MATCHMAKING FLOW                                     │
└─────────────────────────────────────────────────────────────────────────────┘

                                    ●
                                    │
                                    ▼
                            ┌───────────────┐
                            │   Hub Page    │
                            │ Socket.connect│
                            └───────┬───────┘
                                    │
                       ◇────────────┼────────────◇
                      ╱    Select Mode           ╲
                     ◇───────────────────────────◇
                    ╱            │                ╲
                   ▼             ▼                 ▼
          ┌─────────────┐┌─────────────┐  ┌─────────────┐
          │ QUICK PLAY  ││CREATE PRIVATE│  │JOIN PRIVATE │
          └──────┬──────┘└──────┬──────┘  └──────┬──────┘
                 │              │                │
                 ▼              ▼                ▼
          ┌─────────────┐┌─────────────┐  ┌─────────────┐
          │emit         ││emit room:   │  │Enter 6-char │
          │queue:join   ││createPrivate│  │Room Code    │
          └──────┬──────┘└──────┬──────┘  └──────┬──────┘
                 │              │                │
                 ▼              │                ▼
          ┌─────────────┐      │         ┌─────────────┐
          │Add to Queue │      │         │emit room:   │
          │matchmakingQueue    │         │joinPrivate  │
          └──────┬──────┘      │         └──────┬──────┘
                 │              │                │
            ◇────▼────◇        │           ◇────▼────◇
           ╱Queue ≥ 2?╲        │          ╱Room Found?╲
          ◇───────────◇        │         ◇────────────◇
          │NO       YES│       │         │NO        YES│
          ▼            ▼       │         ▼             │
    ┌──────────┐ ┌──────────┐  │   ┌──────────┐       │
    │Show      │ │Match 2   │  │   │Show Error│       │
    │Searching │ │Players   │  │   │"Not Found"       │
    │Overlay   │ └────┬─────┘  │   └──────────┘       │
    └──────────┘      │        │                      │
                      ▼        ▼                      │
               ┌─────────────────┐                    │
               │ Create Room     │                    │
               │ Generate Code   │                    │
               │ rooms.set()     │                    │
               └───────┬─────────┘                    │
                       │                              │
                       └──────────────┬───────────────┘
                                      ▼
                              ┌───────────────┐
                              │emit match:found│
                              │or player_joined│
                              └───────┬───────┘
                                      │
                                      ▼
                              ┌───────────────┐
                              │Save roomCode  │
                              │to sessionStorage
                              └───────┬───────┘
                                      │
                                      ▼
                              ┌───────────────┐
                              │ Redirect to   │
                              │  lobby.html   │
                              └───────┬───────┘
                                      │
                                      ▼
                                      ◉
```

---

## 4. LOBBY ACTIVITY

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            LOBBY FLOW                                        │
└─────────────────────────────────────────────────────────────────────────────┘

                                    ●
                                    │
                                    ▼
                            ┌───────────────┐
                            │  Lobby Page   │
                            │Socket.connect │
                            └───────┬───────┘
                                    │
                                    ▼
                            ┌───────────────┐
                            │emit room:     │
                            │requestInfo    │
                            └───────┬───────┘
                                    │
                                    ▼
                            ┌───────────────┐
                            │Display Room   │
                            │Info & Players │
                            └───────┬───────┘
                                    │
               ┌────────────────────┼────────────────────┐
               │                    │                    │
               ▼                    ▼                    ▼
        ┌─────────────┐     ┌─────────────┐      ┌─────────────┐
        │Select       │     │   READY     │      │   LEAVE     │
        │Character    │     │  Button     │      │  Button     │
        └──────┬──────┘     └──────┬──────┘      └──────┬──────┘
               │                   │                    │
               ▼                   ▼                    ▼
        ┌─────────────┐     ┌─────────────┐      ┌─────────────┐
        │emit lobby:  │     │emit lobby:  │      │emit room:   │
        │characterChanged   │ready        │      │leave        │
        └──────┬──────┘     └──────┬──────┘      └──────┬──────┘
               │                   │                    │
               ▼                   ▼                    ▼
        ┌─────────────┐     ┌─────────────┐      ┌─────────────┐
        │Update UI    │     │Mark Ready   │      │Clear State  │
        │(opponent)   │     │lobbyReady=true     │Redirect Hub │
        └──────┬──────┘     └──────┬──────┘      └─────────────┘
               │                   │
               │              ◇────▼────◇
               │             ╱Both Ready?╲
               │            ◇────────────◇
               │            │NO        YES│
               │            ▼             ▼
               │     ┌──────────┐  ┌──────────────┐
               │     │Wait for  │  │emit lobby:   │
               │     │opponent  │  │bothReady     │
               │     └──────────┘  └──────┬───────┘
               │                          │
               └──────────────────────────┼──────────────────┐
                                          │                  │
                                          ▼                  │
                                   ┌─────────────┐           │
                                   │Save game    │           │
                                   │RoomData     │           │
                                   └──────┬──────┘           │
                                          │                  │
                                          ▼                  │
                                   ┌─────────────┐           │
                                   │Redirect to  │           │
                                   │ game.html   │           │
                                   └──────┬──────┘           │
                                          │                  │
                                          ▼                  │
                                          ◉ ◄────────────────┘
                                           (60s timeout → disband)
```

---

## 5. SHIP DEPLOYMENT ACTIVITY

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                       SHIP DEPLOYMENT FLOW                                   │
└─────────────────────────────────────────────────────────────────────────────┘

                                    ●
                                    │
                                    ▼
                            ┌───────────────┐
                            │  Game Page    │
                            │Socket.connect │
                            └───────┬───────┘
                                    │
                                    ▼
                            ┌───────────────┐
                            │emit rejoin_game│
                            │(check existing)│
                            └───────┬───────┘
                                    │
                           ◇────────▼────────◇
                          ╱ Game in Progress? ╲
                         ◇────────────────────◇
                         │YES              NO │
                         ▼                    ▼
                  ┌─────────────┐      ┌─────────────┐
                  │Restore Game │      │Show Deploy  │
                  │State        │      │Phase UI     │
                  │→ Battle     │      └──────┬──────┘
                  └─────────────┘             │
                                              ▼
                                       ┌─────────────┐
                                       │ 5 Ships to  │
                                       │   Deploy    │
                                       └──────┬──────┘
                                              │
                         ┌────────────────────┼────────────────────┐
                         │                    │                    │
                         ▼                    ▼                    ▼
                  ┌─────────────┐      ┌─────────────┐      ┌─────────────┐
                  │ Drag Ship   │      │ Click to    │      │   Rotate    │
                  │ to Grid     │      │ Place Ship  │      │   Ship (R)  │
                  └──────┬──────┘      └──────┬──────┘      └──────┬──────┘
                         │                    │                    │
                         └────────────────────┴────────────────────┘
                                              │
                                         ◇────▼────◇
                                        ╱ Valid    ╲
                                       ╱ Position?  ╲
                                      ◇─────────────◇
                                      │NO        YES│
                                      ▼             ▼
                               ┌──────────┐  ┌──────────┐
                               │Show Red  │  │Place Ship│
                               │Invalid   │  │on Board  │
                               └──────────┘  └────┬─────┘
                                                  │
                                             ◇────▼────◇
                                            ╱All 5 Ships╲
                                           ╱  Placed?    ╲
                                          ◇──────────────◇
                                          │NO         YES│
                                          ▼              ▼
                                   ┌──────────┐   ┌──────────┐
                                   │Continue  │   │Enable    │
                                   │Placing   │   │READY btn │
                                   └──────────┘   └────┬─────┘
                                                       │
                                                       ▼
                                                ┌─────────────┐
                                                │Click READY  │
                                                └──────┬──────┘
                                                       │
                                                       ▼
                                                ┌─────────────┐
                                                │emit player_ │
                                                │ready {ships}│
                                                └──────┬──────┘
                                                       │
                                                  ◇────▼────◇
                                                 ╱Both Ready?╲
                                                ◇────────────◇
                                                │NO       YES│
                                                ▼            ▼
                                         ┌──────────┐ ┌──────────┐
                                         │Show      │ │startGame │
                                         │"Waiting" │ │→ Battle  │
                                         └──────────┘ └──────────┘
                                                            │
                                                            ▼
                                                            ◉
```

---

## 6. BATTLE ACTIVITY

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           BATTLE FLOW                                        │
└─────────────────────────────────────────────────────────────────────────────┘

                                    ●
                                    │
                                    ▼
                            ┌───────────────┐
                            │emit game_     │
                            │started        │
                            └───────┬───────┘
                                    │
                                    ▼
                            ┌───────────────┐
                            │Initialize     │
                            │currentTurn    │
                            │turnTimer=60s  │
                            └───────┬───────┘
                                    │
            ┌───────────────────────┼───────────────────────┐
            │                       │                       │
            ▼                       ▼                       ▼
     ┌─────────────┐         ┌─────────────┐         ┌─────────────┐
     │  MY TURN    │         │ ENEMY TURN  │         │    CHAT     │
     └──────┬──────┘         └──────┬──────┘         └──────┬──────┘
            │                       │                       │
            ▼                       ▼                       ▼
     ┌─────────────┐         ┌─────────────┐         ┌─────────────┐
     │Click Enemy  │         │Wait for     │         │Type message │
     │Grid Cell    │         │attack_result│         │Send         │
     └──────┬──────┘         └─────────────┘         └─────────────┘
            │
            ▼
     ┌─────────────┐
     │emit attack  │
     │{row, col}   │
     └──────┬──────┘
            │
            ▼
     ┌─────────────┐
     │GameLogic.   │
     │processAttack│
     └──────┬──────┘
            │
       ◇────▼────◇
      ╱  Result?  ╲
     ◇────────────◇
     │MISS      HIT│
     ▼             ▼
┌─────────┐  ┌─────────┐
│emit     │  │emit     │
│turn_    │  │turn_    │
│changed  │  │continue │
│(switch) │  │(keep)   │
└────┬────┘  └────┬────┘
     │            │
     │       ◇────▼────◇
     │      ╱Ship Sunk? ╲
     │     ◇────────────◇
     │     │NO       YES│
     │     │            ▼
     │     │      ┌─────────┐
     │     │      │Show Sunk│
     │     │      │Animation│
     │     │      └────┬────┘
     │     │           │
     │     └───────────┤
     │                 │
     │            ◇────▼────◇
     │           ╱All Ships  ╲
     │          ╱  Sunk?      ╲
     │         ◇──────────────◇
     │         │NO         YES│
     │         ▼              ▼
     │   ┌──────────┐   ┌──────────┐
     │   │Continue  │   │emit      │
     │   │Battle    │   │game_over │
     │   └────┬─────┘   └────┬─────┘
     │        │              │
     │        │              ▼
     │        │        ┌──────────┐
     │        │        │Save Game │
     │        │        │to MongoDB│
     │        │        └────┬─────┘
     │        │              │
     │        │              ▼
     │        │        ┌──────────┐
     │        │        │Show Win/ │
     │        │        │Lose Screen
     │        │        └────┬─────┘
     │        │              │
     │        │              ▼
     │        │              ◉
     │        │
     └────────┴──────────────────────────┐
                                         │
                                    ◇────▼────◇
                                   ╱Turn Timer ╲
                                  ╱  = 0?       ╲
                                 ◇──────────────◇
                                 │NO         YES│
                                 │              ▼
                                 │       ┌──────────┐
                                 │       │Auto      │
                                 │       │Switch    │
                                 │       │Turn      │
                                 │       └────┬─────┘
                                 │            │
                                 └────────────┘
```

---

## 7. DISCONNECT & RECONNECT ACTIVITY

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      DISCONNECT & RECONNECT FLOW                             │
└─────────────────────────────────────────────────────────────────────────────┘

        ┌─────────────────────────────────────────────────────────────┐
        │                    DURING BATTLE                            │
        └─────────────────────────────────────────────────────────────┘

     PLAYER A (Disconnects)              PLAYER B (Opponent)
           │                                    │
           │ disconnect event                   │
           ▼                                    │
    ┌─────────────┐                             │
    │Socket closed│                             │
    └──────┬──────┘                             │
           │                                    │
           ▼                                    ▼
    ┌─────────────┐                      ┌─────────────┐
    │Server marks │                      │emit player_ │
    │disconnected │                      │disconnected │
    │= true       │                      │{countdown:30}│
    └──────┬──────┘                      └──────┬──────┘
           │                                    │
           │                                    ▼
           │                             ┌─────────────┐
           │                             │Show 30s     │
           │                             │Countdown    │
           │                             └──────┬──────┘
           │                                    │
    ┌──────┴──────┐                             │
    │Start 30s    │                             │
    │Timer        │◄───────────────────────────►│
    └──────┬──────┘                             │
           │                                    │
      ◇────▼────◇                               │
     ╱Reconnect? ╲                              │
    ◇────────────◇                              │
    │YES       NO│                              │
    ▼            ▼                              │
┌───────┐  ┌───────────┐                        │
│Rejoin │  │30s expires│                        │
│Game   │  └─────┬─────┘                        │
└───┬───┘        │                              │
    │            ▼                              ▼
    │     ┌─────────────┐                ┌─────────────┐
    │     │Opponent WINS│                │Show "You    │
    │     │by forfeit   │                │WIN!"        │
    │     └──────┬──────┘                └─────────────┘
    │            │
    │            ▼
    │            ◉
    │
    ▼
┌─────────────┐
│emit rejoin_ │
│game         │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│Clear timer  │
│Restore state│
└──────┬──────┘
       │
       ▼
┌─────────────┐
│emit rejoin_ │
│game_success │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│Continue     │
│Battle       │
└─────────────┘
```

---

## 8. WEBRTC VIDEO CALL ACTIVITY

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         VIDEO CALL FLOW                                      │
└─────────────────────────────────────────────────────────────────────────────┘

       CALLER                  SERVER                 RECEIVER
         │                        │                       │
         │ Click Call Button      │                       │
         ▼                        │                       │
  ┌─────────────┐                 │                       │
  │Get User     │                 │                       │
  │Media (cam)  │                 │                       │
  └──────┬──────┘                 │                       │
         │                        │                       │
         ▼                        │                       │
  ┌─────────────┐                 │                       │
  │emit call_   │────────────────►│                       │
  │request      │                 │                       │
  └─────────────┘                 │                       │
                                  ▼                       │
                           ┌─────────────┐                │
                           │Save CallLog │                │
                           │status:init  │                │
                           └──────┬──────┘                │
                                  │                       │
                                  │ emit call_request ───►│
                                  │                       ▼
                                  │                ┌─────────────┐
                                  │                │Show Incoming│
                                  │                │Call Modal   │
                                  │                └──────┬──────┘
                                  │                       │
                                  │                  ◇────▼────◇
                                  │                 ╱  Accept?  ╲
                                  │                ◇────────────◇
                                  │                │NO       YES│
                                  │                ▼            ▼
                                  │         ┌──────────┐ ┌──────────┐
                                  │         │emit call_│ │emit call_│
                                  │         │rejected  │ │accepted  │
                                  │         └────┬─────┘ └────┬─────┘
                                  │              │            │
                           ┌──────┼──────────────┘            │
                           │      │                           │
                           ▼      │                           ▼
                    ┌──────────┐  │                    ┌──────────┐
                    │Update    │  │                    │Get User  │
                    │CallLog   │  │                    │Media     │
                    │rejected  │  │                    └────┬─────┘
                    └────┬─────┘  │                         │
                         │        │                         ▼
         ◄───────────────┘        │                  ┌──────────┐
         │                        │◄─────────────────│emit      │
         ▼                        │                  │webrtc_   │
  ┌─────────────┐                 │                  │offer     │
  │Show "Call   │                 │                  └──────────┘
  │Rejected"    │                 │
  └─────────────┘                 │ Forward offer
                                  │────────────────────────────►│
         │◄────────────────────────────────────────────────────│
         │                        │ Forward answer              │
         │ ◄──────────────────────│◄────────────────────────────│
         │  webrtc_answer         │                             │
         │                        │                             │
         │◄───────────────────────┼─────────────────────────────│
         │  ICE candidates        │  (bidirectional)            │
         │────────────────────────┼────────────────────────────►│
         │                        │                             │
         ▼                        │                             ▼
  ┌─────────────┐                 │                      ┌─────────────┐
  │Video Stream │                 │                      │Video Stream │
  │Connected    │◄────────────────┼─────────────────────►│Connected    │
  └─────────────┘                 │                      └─────────────┘
         │                        │                             │
         │ Click End Call         │                             │
         ▼                        │                             │
  ┌─────────────┐                 │                             │
  │emit end_call│────────────────►│                             │
  └─────────────┘                 │                             │
                                  ▼                             │
                           ┌─────────────┐                      │
                           │Update       │                      │
                           │CallLog:ended│                      │
                           │duration: x  │                      │
                           └──────┬──────┘                      │
                                  │                             │
                                  │ emit call_ended ───────────►│
                                  │                             ▼
                                  │                      ┌─────────────┐
                                  │                      │Close Video  │
                                  │                      │Connection   │
                                  │                      └─────────────┘
```

---

## 9. GAME OVER ACTIVITY

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          GAME OVER FLOW                                      │
└─────────────────────────────────────────────────────────────────────────────┘

                                    ●
                                    │ All ships sunk OR
                                    │ Player left OR
                                    │ Disconnect timeout
                                    ▼
                            ┌───────────────┐
                            │  endGame()    │
                            │ (Server)      │
                            └───────┬───────┘
                                    │
                                    ▼
                            ┌───────────────┐
                            │Database.      │
                            │createGame()   │
                            │Save to MongoDB│
                            └───────┬───────┘
                                    │
                                    ▼
                            ┌───────────────┐
                            │emit game_over │
                            │{winner, loser,│
                            │ characterIds, │
                            │ duration}     │
                            └───────┬───────┘
                                    │
            ┌───────────────────────┴───────────────────────┐
            │                                               │
            ▼                                               ▼
     ┌─────────────┐                                 ┌─────────────┐
     │   WINNER    │                                 │    LOSER    │
     └──────┬──────┘                                 └──────┬──────┘
            │                                               │
            ▼                                               ▼
     ┌─────────────┐                                 ┌─────────────┐
     │Show WIN     │                                 │Show LOSE    │
     │Avatar       │                                 │Avatar       │
     │(character   │                                 │(character   │
     │win image)   │                                 │lose image)  │
     └──────┬──────┘                                 └──────┬──────┘
            │                                               │
            ▼                                               ▼
     ┌─────────────┐                                 ┌─────────────┐
     │"CHIẾN THẮNG"│                                 │"THẤT BẠI"   │
     │Duration: Xs │                                 │Duration: Xs │
     └──────┬──────┘                                 └──────┬──────┘
            │                                               │
            └───────────────────────┬───────────────────────┘
                                    │
                                    ▼
                            ┌───────────────┐
                            │ Show Button:  │
                            │ "Back to Hub" │
                            └───────┬───────┘
                                    │
                                    ▼
                            ┌─────────────┐
                            │Click Button │
                            │backToLobbyBtn│
                            └──────┬──────┘
                                   │
                                   ▼
                            ┌─────────────┐
                            │backToHub()  │
                            │Clear state  │
                            └──────┬──────┘
                                   │
                                   ▼
                            ┌─────────────┐
                            │Redirect to  │
                            │  hub.html   │
                            └──────┬──────┘
                                   │
                                   ▼
                                   ◉
```

---

## 10. COMPLETE USER JOURNEY (SUMMARY)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    COMPLETE USER JOURNEY                                     │
└─────────────────────────────────────────────────────────────────────────────┘

●─────────────────────────────────────────────────────────────────────────────●
│                                                                             │
│   ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐  │
│   │  AUTH   │───►│   HUB   │───►│  LOBBY  │───►│ DEPLOY  │───►│ BATTLE  │  │
│   │         │    │         │    │         │    │         │    │         │  │
│   │Login/   │    │Quick    │    │Wait for │    │Place    │    │Attack   │  │
│   │Register/│    │Play/    │    │opponent │    │5 ships  │    │enemy    │  │
│   │Guest    │    │Private  │    │Ready    │    │Ready    │    │grid     │  │
│   └─────────┘    └─────────┘    └─────────┘    └─────────┘    └────┬────┘  │
│                                                                     │      │
│                                                                     ▼      │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                          GAME OVER                                  │  │
│   │                     Win/Lose → Back to Hub                          │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
●─────────────────────────────────────────────────────────────────────────────●

    Timeline:
    ─────────────────────────────────────────────────────────────────────────
    │ Auth │ Hub │ Lobby (60s max) │ Deploy (90s) │ Battle (60s/turn) │ End │
    ─────────────────────────────────────────────────────────────────────────
```

---

**END OF ACTIVITY DIAGRAMS**
